<hf-ui-row type="flex" :class="[$store.state.appPrefix + '-p-role']" v-loading="isPageLoading">
  <hf-ui-col :span="8" class="role-list-wrapper" v-loading="isListLoading">
    <div class="role-action">
      <hf-ui-button v-if="$hasPermission('role--add')" size="medium" type="secondary" @click="$add">新建</hf-ui-button>
      <hf-ui-button v-if="$hasPermission('role--del')" size="medium" type="important" @click="$delConfirm(null)" :disabled="selectedItems.length < 1">删除</hf-ui-button>
    </div>
    <el-table 
      empty-text="暂无数据" 
      size="small" 
      ref="roleTable" 
      :class="{'role-list-default': activeId === firstId }"
      :data="list" 
      :highlight-current-row="true" 
      @sort-change="$setSort" 
      @row-click="$chosRole"
      @selection-change="$selectionChange">
      <el-table-column type="selection"></el-table-column>
      <el-table-column prop="roleName" sortable="custom" label="角色名"></el-table-column>
      <el-table-column label="操作" width="100">
        <template slot-scope="scope">
          <span class="g-list-action">
            <i v-if="$hasPermission('role--mod')" class="hf-ui-icon ui-icon-line-currency-edit" title="编辑" @click="$edit(scope.row)"></i>
            <i 
            v-if="$hasPermission(scope.row.status == 0 ? 'role--expire' : 'role--recover')" 
            :class="{'el-icon-video-pause': scope.row.status == 0, 'el-icon-video-play': scope.row.status == 1}" 
            :title="scope.row.status == 0 ? '停用' : '启用'" 
            @click="$toggleRoleConfirm(scope.row)"></i>
            <i v-if="$hasPermission('role--del') && (scope.row.roleType == 2 || isAdmin)" class="el-icon-close" title="删除" @click="$delConfirm(scope.row)"></i>
          </span>
        </template>
      </el-table-column>
    </el-table>

    <el-pagination 
      small 
      v-if="totalRecordCountR > 0" 
      background 
      :layout="pageconf.simpleLayout" 
      :page-size="pageSizeR"
      :current-page.sync="pageNoR" 
      :total="totalRecordCountR" 
      @current-change="$getList">
    </el-pagination>
  </hf-ui-col>

  <hf-ui-col class="user-list-wrapper" v-if="activeId">
    <div class="auth-tree">
      <span class="list-title">已授权功能菜单</span>
      <div class="auth-tree-wrap" v-loading="isTreeLoaing">
        <el-tree size="small" :data="menuTree" :props="defaultProps"></el-tree>
      </div>
    </div>
    <div v-if="activeId" class="user-list">
      <div class="list-title">已授权用户</div>
      <auth-user :id="activeId"></auth-user>
    </div>
  </hf-ui-col>

  <el-dialog
    :title="editTitle"
    :visible.sync="isShowEditModal"
    :append-to-body="true"
    width="60%"
    center>

    <role-edit
    :id="editRoleId" 
    :is-edit-model="isEditModel" 
    :toggle-ctrl="isShowEditModal"
    @close="closeEditModal"
    @refresh-data="refreshData"
    ></role-edit>
  </el-dialog>
</hf-ui-row>
